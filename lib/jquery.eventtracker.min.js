/* jQuery EventTracker v0.2.1 */
(function(a){a.fn.trackEvents=function(b){var c=a.fn.trackEvents;a.fn.trackEvents.params=a.extend({delay:250,cssClassForDefaultEvent:"defaultEnable"},b),b=a.fn.trackEvents.params;if(!window._gaq){a.fn.trackEvents.disabled=!0;return}return this.each(function(){var b=a(this),d=c.popDataOptions(b),e=c.getDataEvents(b);_.each(e,function(a){b.get(0).tagName=="A"?b.click(c.link.generateStrategy(b,a,d)):b.get(0).tagName=="FORM"&&b.submit(c.form.generateStrategy(b,a,d))})})},a.fn.trackEvents.form={},a.fn.trackEvents.form.generateStrategy=function(b,c,d){return a.fn.trackEvents.generateStrategy({element:b,event:c,options:d,action:"submit",callback:function(){a.fn.trackEvents.form.callback(b)}})},a.fn.trackEvents.form.callback=function(b){a.fn.trackEvents.callback(b,"submit",a.fn.trackEvents.form)},a.fn.trackEvents.link={},a.fn.trackEvents.link.generateStrategy=function(b,c,d){return a.fn.trackEvents.generateStrategy({element:b,event:c,options:d,action:"click",callback:function(){a.fn.trackEvents.link.callback(b)}})},a.fn.trackEvents.link.callback=function(b){a.fn.trackEvents.callback(b,"click",a.fn.trackEvents.link)},a.fn.trackEvents.link.defaultAction=function(){if(a.fn.trackEvents.hasDefaultEvent(a(this))){var b=a(this).attr("href");a.fn.trackEvents.locationHref(b)}},a.fn.trackEvents.link.defaultAction.action="defaultAction",a.fn.trackEvents.link.hasDefaultAction=function(b){return a.fn.trackEvents.hasDefaultAction(b,"click")},a.fn.trackEvents.generateStrategy=function(b){var c=a.fn.trackEvents,d=c.params,e=function(f){var g=b.event,h=a.fn.trackEvents.keyToTagAttr(b.event.key);g.content=a(this).attr(h),c.notifyAnalytics(g),b.options.javaScriptOnly||(f.preventDefault(),f.stopImmediatePropagation(),b.element.addClass(d.cssClassForDefaultEvent),b.element.off(b.action,e),setTimeout(b.callback,d.delay))};return e},a.fn.trackEvents.callback=function(b,c,d){var e=a.fn.trackEvents;d.defaultAction&&!d.hasDefaultAction(b)&&b[c](d.defaultAction),b.trigger(c)},a.fn.trackEvents.hasDefaultAction=function(a,b){var c=a.data("events");return c?_.any(c[b],function(a){return a.handler.action=="defaultAction"}):!1},a.fn.trackEvents.locationHref=function(a){document.location.href=a},a.fn.trackEvents.hasDefaultEvent=function(b){var c=a.fn.trackEvents.params;return b.hasClass(c.cssClassForDefaultEvent)},a.fn.trackEvents.notifyAnalytics=function(a){window._gaq&&window._gaq.push(["_trackEvent",a.category,a.action,a.content])},a.fn.trackEvents.getDataEvents=function(b){var c=b.data(),d=a.fn.trackEvents,e=_.filter(_.keys(c),function(a){return!!a.match(/^event/)});return _.map(e,function(a){var b=a.split(/[aA]ction/),e=d.whitespace(b[0].replace(/^event/,"")),f=d.whitespace(b[1]);return{key:a,category:e,action:f,content:c[a]}})},a.fn.trackEvents.popDataOptions=function(b){var c=b.data(),d=a.fn.trackEvents,e={javaScriptOnly:"eventJavascriptOnly"};return _.tap({},function(a){_.each(_.keys(e),function(d){var f=e[d],g=c[f];a[d]=g?g:null,b.removeData(f)})})},a.fn.trackEvents.whitespace=function(a){return a.replace(/([A-Z])/g," $1").replace(/^\s+/,"").replace(/\s+$/,"")},a.fn.trackEvents.keyToTagAttr=function(a){return"data-"+a.replace(/([A-Z])/g,"-$1").toLowerCase()}})(jQuery)