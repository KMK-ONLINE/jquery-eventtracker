/* jQuery EventTracker v0.1.0 */
(function(a){a.fn.trackEvents=function(b){var c=a.fn.trackEvents;a.fn.trackEvents.params=a.extend({delay:250,cssClassForDefaultEvent:"defaultEnable"},b),b=a.fn.trackEvents.params;if(!window._gaq){a.fn.trackEvents.disabled=!0;return}return this.each(function(){var b=a(this),d=b.data(),e=c.popDataOptions(b),f=c.getDataEvents(d);_.each(f,function(a){b.get(0).tagName=="A"&&b.click(c.link.generateStrategy(b,a,e))})})},a.fn.trackEvents.link={},a.fn.trackEvents.link.generateStrategy=function(b,c,d){var e=a.fn.trackEvents,f=e.params,g=function(a){e.notifyAnalytics(c),d.javaScriptOnly||(a.preventDefault(),a.stopImmediatePropagation(),b.addClass(f.cssClassForDefaultEvent),b.off("click",g),setTimeout(function(){e.link.callback(b)},f.delay))};return g},a.fn.trackEvents.link.callback=function(b){var c=a.fn.trackEvents;c.link.hasDefaultAction(b)||b.click(c.link.defaultAction),b.trigger("click")},a.fn.trackEvents.link.defaultAction=function(){if(a.fn.trackEvents.hasDefaultEvent(a(this))){var b=a(this).attr("href");a.fn.trackEvents.locationHref(b)}},a.fn.trackEvents.link.defaultAction.action="defaultAction",a.fn.trackEvents.link.hasDefaultAction=function(a){var b=a.data("events");return b?_.any(b.click,function(a){return a.handler.action=="defaultAction"}):!1},a.fn.trackEvents.locationHref=function(a){document.location.href=a},a.fn.trackEvents.hasDefaultEvent=function(b){var c=a.fn.trackEvents.params;return b.hasClass(c.cssClassForDefaultEvent)},a.fn.trackEvents.notifyAnalytics=function(a){window._gaq.push(["_trackEvent",a.category,a.action,a.content])},a.fn.trackEvents.getDataEvents=function(b){var c=a.fn.trackEvents,d=_.filter(_.keys(b),function(a){return!!a.match(/^event/)});return _.map(d,function(a){var d=a.split(/[aA]ction/),e=c.whitespace(d[0].replace(/^event/,"")),f=c.whitespace(d[1]);return{key:a,category:e,action:f,content:b[a]}})},a.fn.trackEvents.popDataOptions=function(b){var c=b.data(),d=a.fn.trackEvents,e={javaScriptOnly:"eventJavascriptOnly"};return _.tap({},function(a){_.each(_.keys(e),function(d){var f=e[d],g=c[f];a[d]=g?g:null,b.removeData(f)})})},a.fn.trackEvents.whitespace=function(a){return a.replace(/([A-Z])/g," $1").replace(/^\s+/,"").replace(/\s+$/,"")}})(jQuery)